|              | PC程序计数器 |  虚拟机栈  | 本地方法栈<br/>HotSpot JVM中直接将本地方法栈和虚拟机栈合二为一 |         堆          |  方法区   |
| :----------: | :----------: | :--------: | :----------------------------------------------------------: | :-----------------: | :-------: |
| 是否线程私有 |      是      |     是     |                              是                              |         否          |    否     |
|   生命周期   |  和线程一致  | 和线程一致 |                          和线程一致                          |      和JVM一致      | 和JVM一致 |
|  是否存在GC  |      否      |     否     |                              否                              | 是<br/>GC的重点区域 |    是     |
| 是否存在OOM  |      否      |     会     |                   会（和虚拟机栈情况相同）                   |         是          |    是     |

- 虚拟机栈的大小可以设置为固定大小，也可以设置为动态扩展
  - 若设置虚拟机栈可以动态扩展，当尝试扩展或创建新的线程时无法申请到足够的内存，JVM将会抛出OOM异常
  - 若采用固定大小的虚拟机栈，如果线程请求分配的栈容量超过允许的最大容量，JVM将会抛出StackOverflowError异常

- 方法中定义的局部变量是否线程安全？
  - 局部变量是线程安全的
  - 但局部变量引用的对象则未必
    - 如果该对象没有逃离方法的作用范围，它是线程安全的
    - 如果该对象逃离方法的作用范围，需要考虑线程安全
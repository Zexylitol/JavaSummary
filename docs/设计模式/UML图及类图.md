<!-- GFM-TOC -->

- [UML图](#UML图)

- [类图概述](#类图概述)
  - [类图的作用](#类图的作用)
  - [类图表示法](#类图表示法)
    - [类的表示方式 ](#类的表示方式 )
    - [类与类之间关系的表示方式](#类与类之间关系的表示方式)
      - [关联关系](#关联关系)
      - [聚合关系](#聚合关系)
      - [组合关系](#组合关系)
      - [依赖关系](#依赖关系)
      - [继承关系](#继承关系)
      - [实现关系](#实现关系)
- [Reference](#Reference)

<!-- GFM-TOC -->

# UML图

统一建模语言（Unified Modeling Language，UML）是用来设计软件的**可视化建模语言**。它的特点是简单、统一、**<font color="red">图形化</font>**、能表达软件设计中的动态与静态信息。

UML 从目标系统的不同角度出发，定义了用例图、**类图**、对象图、状态图、活动图、时序图、协作图、构件图、部署图等 9 种图。

# 类图概述

**<font color="red">类图(Class diagram)是显示了模型的静态结构，特别是模型中存在的类、类的内部结构以及它们与其他类的关系等</font>**。类图不显示暂时性的信息。类图是面向对象建模的主要组成部分。

## 类图的作用

* 在软件工程中，**类图是一种静态的结构图，描述了系统的类的集合、类的属性和类之间的关系**，可以简化了人们对系统的理解；
* 类图是系统分析和设计阶段的重要产物，是系统编码和测试的重要模型。

## 类图表示法

### 类的表示方式 

在UML类图中，类使用包含类名、属性(field) 和方法(method) 且带有分割线的矩形来表示

**类图分三层，第一层显示类的名称，如果是抽象类，则就用斜体显示；第二层是类的特性，通常就是字段和属性；第三层是类的操作，通常是方法或行为。**接口图与类图的区别主要是顶端有`<<interface>>`显示，第一行是接口名称，第二行是接口方法。接口还有另外一种表示方法，俗称[棒棒糖表示法](http://www.uml.org.cn/oobject/201006243.asp)

<center><img src="https://i.im5i.com/2021/05/12/CVOZj.png" alt="CVOZj.png" border="0" /></center>

比如下图表示一个`Employee`类，它包含`name,age`和`address`这3个属性，以及`work()`方法。 

<center><img src="https://i.im5i.com/2021/05/11/CVJkL.png" alt="CVJkL.png" border="0" /></center>



属性/方法名称前加的加号和减号表示了这个属性/方法的可见性，UML类图中表示可见性的符号有三种：

* +：表示`public`

* -：表示`private`

* #：表示`protected`

属性的完整表示方式是： **可见性  名称 ：类型 [ = 缺省值]**  

方法的完整表示方式是： **可见性  名称(参数列表) [ ： 返回类型]**

> 注意：
>
> ​	1，中括号中的内容表示是可选的
>
> ​	2，也有将类型放在变量名前面（- String name），返回值类型放在方法名前面（+ void work()）

**举个栗子：**

<center><img src="https://i.im5i.com/2021/05/11/CVslt.png" alt="CVslt.png" border="0" /></center>



上图`Demo`类定义了三个方法：

* `method()`方法：修饰符为`public`，没有参数，没有返回值。
* `method1()`方法：修饰符为`private`，没有参数，返回值类型为`String`。
* `method2()`方法：修饰符为`protected`，接收两个参数，第一个参数类型为`int`，第二个参数类型为`String`，返回值类型是`int`。

### 类与类之间关系的表示方式

#### 关联关系

关联关系是对象之间的一种引用关系，**用于表示一类对象与另一类对象之间的联系，如老师和学生、师傅和徒弟、丈夫和妻子等**。关联关系是类与类之间最常用的一种关系，分为**一般关联关系、聚合关系和组合关系**。先介绍一般关联。

关联又可以分为单向关联，双向关联，自关联。当一个类‘知道’另一个类时，可以用关联（association），例如，企鹅需要‘知道’气候的变化，需要‘了解’气候规律。

**单向关联**

<center><img src="https://i.im5i.com/2021/05/11/CVE9q.png" alt="CVE9q.png" border="0" /></center>

在UML类图中单向关联**用一个带箭头的实线表示**。上图表示每个顾客都有一个地址，这通过让`Customer`类持有一个类型为`Address`的成员变量类实现。

**双向关联**

<center><img src="https://i.im5i.com/2021/05/11/CVUam.png" alt="CVUam.png" border="0" /></center>

从上图中很容易看出，所谓的双向关联就是双方各自持有对方类型的成员变量。

**在UML类图中，双向关联用一个不带箭头的直线表示**。上图中在`Customer`类中维护一个`List\<Product>`，表示一个顾客可以购买多个商品；在`Product`类中维护一个`Customer`类型的成员变量表示这个产品被哪个顾客所购买。

**自关联**

<center><img src="https://i.im5i.com/2021/05/11/CVtGs.png" alt="CVtGs.png" border="0" /></center>

自关联在UML类图中用一个带有箭头且指向自身的线表示。上图的意思就是`Node`类包含类型为`Node`的成员变量，也就是“自己包含自己”。



####  聚合关系

聚合关系是关联关系的一种，是<font color="red">强关联关系，**是整体和部分之间的关系**</font>。

<font color="blue">聚合表示一种弱的“拥有”关系，体现的是A对象可以包含B对象，但B对象不是A对象的一部分。</font>例如，大雁是群居动物，每只大雁都属于一个雁群，一个雁群可以有多只大雁，所以它们之间就满足聚合（Aggregation）关系。

聚合关系也是通过**成员对象**来实现的，<font color="red">**其中成员对象是整体对象的一部分**，但是**成员对象可以脱离整体对象而独立存在**</font>。例如，学校与老师的关系，学校包含老师，但如果学校停办了，老师依然存在。

在 UML 类图中，聚合关系可以用**带空心菱形的实线**来表示，**菱形指向整体**。下图所示是大学和教师的关系图：

<center><img src="https://i.im5i.com/2021/05/11/CVuHQ.png" alt="CVuHQ.png" border="0" /></center>

####  组合关系

组合表示<font color="red">类之间的整体与部分的关系，但它是一种更强烈的聚合关系</font>。

<font color="blue">合成（Composition，组合）是一种强的“拥有”关系，体现了严格的部分和整体的关系，部分和整体的生命周期一样。</font>例如，鸟和其翅膀就是组合关系，因为它们是部分和整体的关系，并且翅膀和鸟的生命周期是相同的。

在组合关系中，<font color="red">**整体对象可以控制部分对象的生命周期，一旦整体对象不存在，部分对象也将不存在，部分对象不能脱离整体对象而存在**</font>。例如，头和嘴的关系，没有了头，嘴也就不存在了。

在 UML 类图中，组合关系用**带实心菱形的实线来表示，菱形指向整体**。下图所示是头和嘴的关系图：

<center><img src="https://i.im5i.com/2021/05/11/CV5A3.png" alt="CV5A3.png" border="0" /></center>



#### 依赖关系

**依赖关系是一种<font color="red">使用关系</font>，它是对象之间耦合度最弱的一种关联方式，是临时性的关联**。在代码中，某个类的方法通过**<font color="red">局部变量、方法的参数或者对静态方法的调用</font>**来访问另一个类（被依赖类）中的某些方法来完成一些职责。

在 UML 类图中，依赖关系使用**带箭头的虚线来表示，箭头从使用类指向被依赖的类**。下图所示是司机和汽车的关系图，司机驾驶汽车：

<center><img src="https://i.im5i.com/2021/05/11/CVjqy.png" alt="CVjqy.png" border="0" /></center>

####  继承关系

**继承关系是对象之间耦合度最大的一种关系**，表示一般与特殊的关系，**是父类与子类之间的关系**，是一种继承关系。

在 UML 类图中，泛化关系用**带空心三角箭头的实线来表示，箭头从子类指向父类**。在代码实现时，使用面向对象的继承机制来实现泛化关系。例如，`Student` 类和 `Teacher` 类都是 `Person` 类的子类，其类图如下图所示：

<center><img src="https://i.im5i.com/2021/05/11/CVTsO.png" alt="CVTsO.png" border="0" /></center>



#### 实现关系

实现关系是**接口与实现类之间的关系**。在这种关系中，类实现了接口，类中的操作实现了接口中所声明的所有的抽象操作。

在 UML 类图中，实现关系使用**带空心三角箭头的虚线来表示，箭头从实现类指向接口**。例如，汽车和船实现了交通工具，其类图如下图所示。

<center><img src="https://i.im5i.com/2021/05/11/CVWIR.png" alt="CVWIR.png" border="0" /></center>

  

# Reference

- [黑马程序员Java设计模式详解](https://www.bilibili.com/video/BV1Np4y1z7BU?p=10&spm_id_from=pageDriver)

- [大话设计模式](https://book.douban.com/subject/2334288/)